var utils={urlToObj:function(){var e=decodeURI(window.location.search.slice(1)),n={};return e.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n},openUrl:function(e,t){var n=document.querySelector("base"),o="";if(!t&&!n)return window.location.href=e;n?o=n.href.split("/home")[0]+"/"+(o=e.replace(/^(\.\.\/){1,2}/,"")):o=e;t=t||{};var a="?";for(var i in t)a+=i+"="+t[i]+"&";a=encodeURI(a.slice(0,-1)),window.location.href=o+a},copyArr:function(e){return 0===e.length?[]:JSON.parse(JSON.stringify(e))},limitInput:function(e,t,n,o){if(e=e||"",t)switch(t){case"number":e=e.replace(/\D/g,"");break;case"password":e=e.replace(/[^\da-zA-Z]/g,"");break;case"cn":e=e.replace(/[^\u4E00-\u9FA5a-zA-Z\']/g,"");break;default:e=e.replace(o,"")}return n&&(e=e.slice(0,n)),e},regExpText:function(e,t,n){var o=!1;switch(t){case"mobile":o=/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(e);break;case"password":o=/^[a-zA-Z\d]{6,12}$/.test(e);break;case"email":o=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(e);break;default:o=!!n&&n.test(e)}return o},encryption:function(e){var t=CryptoJS.enc.Utf8.parse("alasgad980f7467f"),n=CryptoJS.enc.Utf8.parse("alasgad980f7467f");return CryptoJS.AES.encrypt(e,t,{iv:n,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.ZeroPadding}).toString()},setUserInfo:function(e){utils.clearUserInfo();var t=JSON.parse(JSON.stringify(e));window.sessionStorage.setItem("USER_TOKEN",t.token),window.sessionStorage.setItem("USER_INFO",JSON.stringify(t)),window.sessionStorage.setItem("USER_INFO_EXPIRE",Date.now())},getUserInfo:function(){return window.sessionStorage.getItem("USER_INFO")},getUserToken:function(){return window.sessionStorage.getItem("USER_TOKEN")||""},clearUserInfo:function(){window.sessionStorage.removeItem("USER_INFO"),window.sessionStorage.removeItem("USER_TOKEN"),window.sessionStorage.removeItem("USER_INFO_EXPIRE")},loginTo:function(){var e=utils.urlToObj().loginfrom;window.location.href=e?"../../pages/"+e+"?"+window.location.search.slice(1):"../../../index.html"},judgeLoginStatusExpire:function(){var e=window.sessionStorage.getItem("USER_INFO_EXPIRE");return 7<(Date.now()-1*e)/864e5},goLogin:function(){var e=window.location,t=e.pathname,n=e.search,o=t.replace(/\/.*pages\/(.*html)/,"$1"),a=n?"&"+n.slice(1):"";window.location.href="../../pages/login/login.html?loginfrom="+o+a},judgeIsLogin:function(e){var t=this;return utils.getUserToken()?!this.judgeLoginStatusExpire()||void e.$toast("您的登录状态已过期，请重新登录",800).then(function(){t.goLogin()}):(e.$toast("您尚未登录，请登录后再试",800).then(function(){t.goLogin()}),!1)},randomNum:function(){return parseInt(10*Math.random())},preventKeyboard:function(){window.addEventListener("resize",function(){"INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName||window.setTimeout(function(){"scrollIntoView"in document.activeElement?document.activeElement.scrollIntoView(!1):document.activeElement.scrollIntoViewIfNeeded()},0)})},listenerNativeBack:function(e){window.history&&window.history.pushState&&(window.addEventListener("popstate",function(){e()}),window.history.pushState(null,null,null))},locationStorageMap:function(n){var e=document.createElement("div");e.style.display="none",e.id="allmap",document.querySelector("body").appendChild(e);var o=new BMap.Map("allmap"),t=new BMap.Point(116.331398,39.897445);o.centerAndZoom(t,12),(new BMap.Geolocation).getCurrentPosition(function(e){if(this.getStatus()==BMAP_STATUS_SUCCESS){var t=new BMap.Marker(e.point);o.addOverlay(t),o.panTo(e.point),window.localStorage.setItem("GET_CURRENT_LOCATION",JSON.stringify(e)),n()}else utils.locationStorageMap()},{enableHighAccuracy:!0})},getPosition:function(){var e=window.localStorage.getItem("GET_CURRENT_LOCATION"),t={latitude:"23.1194300000",longitude:"113.3212200000"};if(!e)return this.locationStorageMap(this.getPosition);var n=JSON.parse(e).point;return t.latitude=n.lat,t.longitude=n.lng,t},getCityData:function(e){var t=window.localStorage.getItem("GET_CURRENT_LOCATION");return t?JSON.parse(t).address[e]:{cityCode:257,cityId:440100}[e]},createLoading:function(t){setTimeout(function(){var e={renderer:"svg",loop:!0,autoplay:!0,container:t,animationData:LOADING_CONFIG};lottie.loadAnimation(e)},200)},formatDate:function(e){var t=new Date(e),n=t.getMonth()+1,o=t.getDate(),a=t.getHours(),i=t.getMinutes(),r=t.getSeconds();return n<=9&&(n="0"+n),o<=9&&(o="0"+o),a<=9&&(a="0"+a),i<=9&&(i="0"+i),r<=9&&(r="0"+r),t.getFullYear()+"-"+n+"-"+o+" "+a+":"+i+":"+r},howLongBefore:function(e,t){"number"==typeof e?(date=e,e=this.formatDate(e)):date=Date.parse(e.replace(/\-/g,"/"));var n=t-date,o=n/6e4,a=n/36e5,i=n/31104e6,r=null;switch(!0){case 1<=i:r=this.formatHowLongBefore(e,"$1年$2月$3日$4");break;case 48<=a&&i<1:r=this.formatHowLongBefore(e,"$2月$3日$4");break;case 24<=a&&a<48:r=this.formatHowLongBefore(e,"昨天$4");break;case 1<=a&&a<24:r=parseInt(a)+"小时前";break;case a<=1&&1<o:r=parseInt(o)+"分钟前";break;case o<=1:r="刚刚";break;default:r=e}return r},formatHowLongBefore:function(e,t){return e.toString().replace(/(\d{4})\-(\d{2})\-(\d{2})(.{6})(.*)/,t)},downloadApp:function(e){var t=navigator.userAgent.toLowerCase(),n=null;/iphone|ipad|ipod|mac/i.test(t)?n="seller"===e?"https://itunes.apple.com/cn/app/%E9%98%BF%E6%8B%89%E7%A7%81%E5%AE%B6%E5%95%86%E5%AE%B6%E7%AB%AF/id1403227465?mt=8":"https://itunes.apple.com/cn/app/%E9%98%BF%E6%8B%89%E7%A7%81%E5%AE%B6/id1369812654?mt=8":/android/i.test(t)?n="seller"===e?"http://sj.qq.com/myapp/detail.htm?apkName=com.cn.alasga.merchant":"http://android.myapp.com/myapp/detail.htm?apkName=alsj.com.EhomeCompany":/windows/i.test(t)&&(n="seller"===e?"http://sj.qq.com/myapp/detail.htm?apkName=com.cn.alasga.merchant":"http://android.myapp.com/myapp/detail.htm?apkName=alsj.com.EhomeCompany"),window.location.href=n},getUA:function(){var e=null,t=window.navigator.userAgent;switch(!0){case/micromessenger/i.test(t):e="wx";break;case/qqbrowser/i.test(t):e="qqBrowser";break;case/qq/i.test(t):e="qq";break;default:e="UN_KNOW"}return e},scrollTop:function(e,t){var n=$(".home-content");if(!t)return n.scrollTop(e),e;var o=t/20,a=n.scrollTop(),i=(e-a)/o,r=setInterval(function(){0<o?(o--,utils.scrollTop(a+=i)):clearInterval(r)})},initShare:function(e,t){if("wx"!=this.getUA()&&"qq"!=this.getUA())return!1;var n=null;switch(e.content){case"product":n="我在阿拉私家APP发现一个不错的定制家具产品，快来看看吧。";break;case"store":n="我在阿拉私家APP发现一个不错的定制家具店铺，快来看看吧。";break;case"case":n="我在阿拉私家APP发现一个不错的定制家具案例，快来看看吧。";break;case"article":n="我在阿拉私家APP发现一个不错的定制家具文章，快来看看吧。";break;case"designer":n="我在阿拉私家APP发现一位不错的定制家具设计师，快来看看吧。";break;case"minSheng":n="万元日手续费低至1块3，最长支持36期。";break;case"index":n="【阿拉私家】汇集全国定制家具门店，免费上门量尺，定制可享分期。";break;case"accessPrice":n="阿拉私家在线免费预算报价，汇聚全国家具定制门店超10000名设计师签约合同数据。";break;case"seller":n="做定制家具生意，上阿拉私家。";break;default:n=e.content}this.qqShare(e,n),this.wxShare(e,n,t)},wxShare:function(e,t,n){var o=e.title,a=e.link,i=e.icon,r=this,s={title:o,link:a||window.location.href,imgUrl:i||iconImg,desc:t};n.$http(API.getWxShareData,{url:window.location.href},function(e){r.onWxShare(s,e.data)},function(e){n.$toast(e.msg)},{token:""})},qqShare:function(e,t){var n=document.querySelector("head"),o=document.createElement("meta"),a=o.cloneNode(),i=o.cloneNode();o.content=e.title,o.itemprop="name",i.content=iconImg,i.itemprop="image",a.content=t,a.name="description",a.itemprop="description",n.appendChild(o),n.appendChild(i),n.appendChild(a)},onWxShare:function(a,e){var t=e.appId,n=e.wechatTimeStamp,o=e.nonceStr,i=e.signature;wx.config({nonceStr:o,signature:i,appId:t,timestamp:n,debug:!1,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){var e=a.title,t=a.desc,n=a.imgUrl,o=a.link;wx.onMenuShareTimeline({title:e,link:o,imgUrl:n,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:e,desc:t,link:o,imgUrl:n,type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:e,desc:t,link:o,imgUrl:n,success:function(){},cancel:function(){}})})}};