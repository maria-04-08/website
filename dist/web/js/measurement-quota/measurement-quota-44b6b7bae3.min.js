var vm=new Vue({el:"#measurement-quota",data:{form:{areaVal:"",cardNumVal:"",cardLimit:"",overdueVal:"",incomeVal:"",budgetVal:""},id:"",hasAmount:!1,noAmount:!1,finishedTap:!1,showAgeList:!1,dotNum1:110,dotNum2:38,money:"",showH5:!1,screenWidth:document.body.clientWidth,formData:[{name:"房产价值:",type:"areaVal",list:[{value:1,check:"off",name:"低于100万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:2,check:"off",name:"100万~200万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:3,check:"off",name:"200万~300万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:4,check:"off",name:"300万~500万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:5,check:"off",name:"500万以上",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]},{type:"cardNumVal",name:"持有信用卡:",list:[{value:1,check:"off",name:"5张以内（含5张）",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:2,check:"off",name:"5张以上",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]},{type:"cardLimit",name:"已用信用卡额度:",list:[]},{type:"overdueVal",name:"近两年逾期情况:",list:[{value:1,check:"off",name:"没逾期",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:2,check:"off",name:"1~5次",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:3,check:"off",name:"6~9次",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:4,check:"off",name:"10~12次",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:5,check:"off",name:"12次以上",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]},{type:"incomeVal",name:"家庭月净收入:",list:[{value:1,check:"off",name:"3000元以下",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:2,check:"off",name:"3000元~5000元",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:3,check:"off",name:"5000元~8000元",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:4,check:"off",name:"8000元~1.5万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:5,check:"off",name:"1.5万~3万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:6,check:"off",name:"3万以上",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]},{type:"budgetVal",name:"装修预算（硬装、软装）:",list:[{value:1,check:"off",name:"8万~15万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:2,check:"off",name:"12万~20万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:3,check:"off",name:"20万~30万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:4,check:"off",name:"30万~50万",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]}],amount:{name:"",age:"",phone:""},totalAmount:"",age:["90后小姐姐","90后小哥哥","80后姐姐","80后哥哥","70后大姐姐","70后大哥哥"]},methods:{limitCard:function(){this.form.cardLimit=utils.limitInput(this.form.cardLimit,"number",3)},limitPhone:function(){this.amount.phone=utils.limitInput(this.amount.phone,"number",11)},changeImg:function(e,t,a){this.formData[e].list.map(function(e){e.checkImg="../../img/measurement_quota/radio_unchecked.png",e.check="off"}),this.form[a]=this.formData[e].list[t].value,this.formData[e].list[t].check="on",this.formData[e].list[t].checkImg="../../img/measurement_quota/radio_checked.png"},submit:function(){var t=this,e=t.form;if(0!=e.areaVal.length)if(0!=e.cardNumVal.length)if(0!=e.cardLimit.length)if(0!=e.overdueVal.length)if(0!=e.incomeVal.length)if(0!=e.budgetVal.length){var a={houseValueType:e.areaVal,cardQtyType:e.cardNumVal,usedQuota:e.cardLimit,overdueStatType:e.overdueVal,familyIncomeType:e.incomeVal,materialsBudgetType:e.budgetVal,token:""};t.$loading(),t.$http(API.submitReckonQuota,a,function(e){t.$loading(!1),t.finishedTap=!0,t.id=e.data.reckonQuota.id,t.form.cardLimit="",t.formData.map(function(e){e.list.map(function(e){e.checkImg="../../img/measurement_quota/radio_unchecked.png",e.check="off"})})},function(e){t.$loading(!1),t.$toast(e.msg)},{token:""})}else t.$toast("请选择装修建材预算");else t.$toast("请选择家庭净收入");else t.$toast("请选择近两年逾期情况");else t.$toast("请输入已使用的信用卡额度");else t.$toast("请选择持有信用卡");else t.$toast("请选择房产价值")},getReckonQuota:function(){var t=this,e=t.amount;if(0!=e.name.length)if(0!=e.phone.length){if(!utils.regExpText(e.phone,"mobile"))return t.$toast("请输入正确的手机号"),!1;if(0!=e.age.length){t.$loading();var a={reckonQuotaId:t.id,userAge:e.age,userName:e.name,userPhone:e.phone,token:""};t.$http(API.getReckonQuota,a,function(e){t.$loading(!1),t.finishedTap=!1,t.amount={name:"",age:"",phone:""},1==(e=e.data.reckonQuota).resultType?(-1!==e.result.indexOf("万")?(e.result=e.result.substring(0,e.result.indexOf("万")),t.money="万"):-1!==e.result.indexOf("元")&&(e.result=e.result.substring(0,e.result.indexOf("元")),t.money="元"),t.totalAmount=e.result,t.hasAmount=!0):0==e.resultType&&(t.noAmount=!0)},function(e){t.$loading(!1),t.$toast(e.msg)},{token:""})}else t.$toast("请选择年龄段")}else t.$toast("请输入手机号码");else t.$toast("请输入姓名")}},mounted:function(){var a=this;window.screenWidth=document.body.clientWidth,window.screenWidth<1200?(this.dotNum1=80,this.dotNum2=24):(this.dotNum1=110,this.dotNum2=38),window.screenWidth<768?this.showH5=!0:this.showH5=!1,$(document).bind("click",function(e){for(var t=(e=e||window.event).target||e.srcElement;t;){if(t.id&&"age-box"==t.id)return;t=t.parentNode}a.showAgeList=!1}),window.onresize=function(){return window.screenWidth=document.body.clientWidth,void(a.screenWidth=window.screenWidth)}},watch:{screenWidth:function(e){(this.screenWidth=e)<1200?(this.dotNum1=80,this.dotNum2=24):(this.dotNum1=110,this.dotNum2=38),this.showH5=e<768}}});