var vm=new Vue({el:"#measurement-quota-h5",data:function(){return{showCategory:!1,showFooter:!1,money:"",slots1:[{flex:1,values:[{name:"低于100万",value:1},{name:"100万~200万",value:2},{name:"200万~300万",value:3},{name:"300万~500万",value:4},{name:"500万以上",value:5}],className:"slot1",textAlign:"center",defaultIndex:0}],slots2:[{flex:1,values:[{name:"5张以内（含5张）",value:1},{name:"5张以上",value:2}],className:"slot1",textAlign:"center",defaultIndex:0}],slots3:[{flex:1,values:[{name:"没逾期",value:1},{name:"1~5次",value:2},{name:"6~9次",value:3},{name:"10~12次",value:4},{name:"12次以上",value:5}],className:"slot1",textAlign:"center",defaultIndex:0}],slots4:[{flex:1,values:[{name:"3000元以下",value:1},{name:"3000元~5000元",value:2},{name:"5000元~8000元",value:3},{name:"8000元~1.5万",value:4},{name:"1.5万~3万",value:5},{name:"3万以上",value:6}],className:"slot1",textAlign:"center",defaultIndex:0}],slots5:[{flex:1,values:[{name:"8万~15万",value:1},{name:"12万~20万",value:2},{name:"20万~30万",value:3},{name:"30万~50万",value:4}],className:"slot1",textAlign:"center",defaultIndex:0}],form:{areaVal:"",cardNumVal:"",cardLimit:"",overdueVal:"",incomeVal:"",budgetVal:""},inputVal:{areaVal:"",cardNumVal:"",cardLimit:"",overdueVal:"",incomeVal:"",budgetVal:""},show:{area:!1,cardNum:!1,cardLimit:!1,overdueVal:!1,incomeVal:!1,budgetVal:!1},id:"",hasAmount:!1,noAmount:!1,finishedTap:!1,formData:[{name:"房产价值:",type:"areaVal",list:[{value:1,name:"低于100万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:2,name:"100万~200万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:3,name:"200万~300万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:4,name:"300万~500万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:5,name:"500万以上",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]},{type:"cardNumVal",name:"持有信用卡:",list:[{value:1,name:"5张以内（含5张）",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:2,name:"5张以上",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]},{type:"cardLimit",name:"已用信用卡额度:",list:[]},{type:"overdueVal",name:"近两年逾期情况:",list:[{value:3,name:"没逾期",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:4,name:"1~5次",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:5,name:"6~9次",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:6,name:"10~12次",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:7,name:"12次以上",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]},{type:"incomeVal",name:"家庭月净收入:",list:[{value:1,name:"3000元以下",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:2,name:"3000元~5000元",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:3,name:"5000元~8000元",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:4,name:"8000元~1.5万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:5,name:"8000元~1.5万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:6,name:"1.5万~3万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:7,name:"3万以上",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]},{type:"budgetVal",name:"装修预算（硬装、软装）:",list:[{value:1,name:"8万~15万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:2,name:"12万~20万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:3,name:"20万~30万",checkImg:"../../img/measurement_quota/radio_unchecked.png"},{value:4,name:"30万~50万",checkImg:"../../img/measurement_quota/radio_unchecked.png"}]}],amount:{name:"",age:"",phone:""},showAgeList:!1,totalAmount:"",age:["90后小姐姐","90后小哥哥","80后姐姐","80后哥哥","70后大姐姐","70后大哥哥"]}},methods:{setAreaVal:function(){var e=this,a=e.$refs.picker1;e.form.areaVal=a.getValues()[0].value,e.inputVal.areaVal=a.getValues()[0].name,e.show.area=!1;for(var t="",n=0;n<e.slots1[0].values.length;n++)e.slots1[0].values[n].value==e.form.areaVal&&(t=n);e.slots1[0].defaultIndex=t},setCardNum:function(){var e=this,a=e.$refs.picker2;e.form.cardNumVal=a.getValues()[0].value,e.inputVal.cardNumVal=a.getValues()[0].name,e.show.cardNum=!1;for(var t="",n=0;n<e.slots2[0].values.length;n++)e.slots2[0].values[n].value==e.form.cardNumVal&&(t=n);e.slots2[0].defaultIndex=t},setOverdueVal:function(){var e=this,a=e.$refs.picker3;e.form.overdueVal=a.getValues()[0].value,e.inputVal.overdueVal=a.getValues()[0].name,e.show.overdueVal=!1;for(var t="",n=0;n<e.slots3[0].values.length;n++)e.slots3[0].values[n].value==e.form.overdueVal&&(t=n);e.slots3[0].defaultIndex=t},setIncomeVal:function(){var e=this,a=e.$refs.picker4;e.form.incomeVal=a.getValues()[0].value,e.inputVal.incomeVal=a.getValues()[0].name,e.show.incomeVal=!1;for(var t="",n=0;n<e.slots4[0].values.length;n++)e.slots4[0].values[n].value==e.form.incomeVal&&(t=n);e.slots4[0].defaultIndex=t},setBudgetVal:function(){var e=this,a=e.$refs.picker5;e.form.budgetVal=a.getValues()[0].value,e.inputVal.budgetVal=a.getValues()[0].name,e.show.budgetVal=!1;for(var t="",n=0;n<e.slots5[0].values.length;n++)e.slots5[0].values[n].value==e.form.budgetVal&&(t=n);e.slots5[0].defaultIndex=t},onInput:function(){var e=this;setTimeout(function(){e.$refs.inputBox.focus()},1)},limitCard:function(){var e=this.inputVal.cardLimit.length;if(e<4){var a=10*parseInt(e);$(".used-amount input").css("width",a+"px")}this.inputVal.cardLimit=utils.limitInput(this.inputVal.cardLimit,"number",3)},limitPhone:function(){this.amount.phone=utils.limitInput(this.amount.phone,"number",11)},changeImg:function(e,a,t){this.formData[e].list.map(function(e){e.checkImg="../../img/measurement_quota/radio_unchecked.png"}),this.form[t]=this.formData[e].list[a].value,this.formData[e].list[a].checkImg="../../img/measurement_quota/radio_checked.png"},stopScroll:function(){return!1},submit:function(){var a=this,e=a.inputVal,t=a.form;if(0!=e.areaVal.length)if(0!=e.cardNumVal.length)if(0!=e.cardLimit.length)if(0!=e.overdueVal.length)if(0!=e.incomeVal.length)if(0!=e.budgetVal.length){var n={houseValueType:t.areaVal,cardQtyType:t.cardNumVal,usedQuota:e.cardLimit,overdueStatType:t.overdueVal,familyIncomeType:t.incomeVal,materialsBudgetType:t.budgetVal,token:""};a.$loading(),a.$http(API.submitReckonQuota,n,function(e){a.$loading(!1),a.finishedTap=!0,a.id=e.data.reckonQuota.id,a.form.cardLimit="",a.inputVal={areaVal:"",cardNumVal:"",cardLimit:"",overdueVal:"",incomeVal:"",budgetVal:""}},function(e){a.$loading(!1),a.$toast(e.msg)},{token:""})}else a.$toast("请选择装修建材预算");else a.$toast("请选择家庭净收入");else a.$toast("请选择近两年逾期情况");else a.$toast("请输入已使用的信用卡额度");else a.$toast("请选择持有信用卡");else a.$toast("请选择房产价值")},getReckonQuota:function(){var a=this,e=a.amount;if(0!=e.name.length)if(0!=e.phone.length){if(!utils.regExpText(e.phone,"mobile"))return a.$toast("请输入正确的手机号"),!1;if(0!=e.age.length){a.$loading();var t={reckonQuotaId:a.id,userAge:e.age,userName:e.name,userPhone:e.phone,token:""};a.$http(API.getReckonQuota,t,function(e){a.$loading(!1),a.finishedTap=!1,a.amount={name:"",age:"",phone:""},1==(e=e.data.reckonQuota).resultType?(-1!==e.result.indexOf("万")?(e.result=e.result.substring(0,e.result.indexOf("万")),a.money="万"):-1!==e.result.indexOf("元")&&(e.result=e.result.substring(0,e.result.indexOf("元")),a.money="元"),a.totalAmount=e.result,a.hasAmount=!0):0==e.resultType&&(a.noAmount=!0)},function(e){a.$loading(!1),a.$toast(e.msg)},{token:""})}else a.$toast("请选择年龄段")}else a.$toast("请输入手机号码");else a.$toast("请输入姓名")},showAreaPick:function(){document.getElementById("pickerBox").scrollIntoView(!1)}},mounted:function(){var t=this;utils.urlToObj().footer&&(t.showFooter=!0),$(document).bind("click",function(e){for(var a=(e=e||window.event).target||e.srcElement;a;){if(a.id&&"age-box"==a.id)return;a=a.parentNode}t.showAgeList=!1})},watch:{finishedTap:function(e){e?$("body").css("position","fixed"):$("body").css("position","relative")}}});