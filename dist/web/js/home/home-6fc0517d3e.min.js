var vm=new Vue({el:"#home",data:{title:[{name:"首页",url:""},{name:"企业版",url:"../erayic-enterprise/erayic-enterprise.html"},{name:"个人版",url:"../erayic-personal/erayic-personal.html"}],titleIndex:0,features:[{title:"物联网",text:"基于物联网构建起硬件设备实施的全面性监控",img:"../../img/home/icon/features01.png"},{title:"精细化天气",text:"基于精准的地理位置，给出最小范围的气象预报",img:"../../img/home/icon/features02.png"},{title:"智慧分析",text:"有针对性的提出操作管理建议与分析依据",img:"../../img/home/icon/features03.png"},{title:"科学数据",text:"大数据的综合运用，有效为管理者提供科学的决策",img:"../../img/home/icon/features04.png"}],services:[{img:"../../img/home/icon/services01.png",text:"生产批次管理"},{img:"../../img/home/icon/services02.png",text:"生长视频记录"},{img:"../../img/home/icon/services03.png",text:"农业气象旬报"},{img:"../../img/home/icon/services04.png",text:"精细化天气预报"},{img:"../../img/home/icon/services05.png",text:"农技专家服务"},{img:"../../img/home/icon/services06.png",text:"病虫害知识库"},{img:"../../img/home/icon/services07.png",text:"价格动态服务"},{img:"../../img/home/icon/services08.png",text:"台风实时路径"}],contact:[{img:"../../img/home/icon/email-logo.png",title:"电子邮箱",text:"magic-zhong@qq.com"},{img:"../../img/home/icon/phone.png",title:"咨询电话",text:"0898-66236818"}],menuIndex:0,onPersonalCode:!1,onEnterpriseCode:!1,showMiniCode:!1,startTime:0,endTime:0,now:0,showH5:!1,screenWidth:document.body.clientWidth,screenHeight:document.body.clientHeight,showH5Menu:!1,status:!1,chart1:"",chart2:"",chart3:"",proccess1:0,proccess2:0,proccess3:0,setStatus:!1},methods:{changeIndex:function(e,t){this.titleIndex=e,window.location.href=t},toPage:function(e){this.startTime=0,this.endTime=0,this.now=0,this.status&&0==e?document.getElementById("msg_end").scrollIntoView(!1):$("#main").animate({top:e+"px"},1e3)},toHref:function(e){"download"==e&&(e="https://sj.qq.com/myapp/detail.htm?apkName=com.erayic.agr2s"),window.location.href=e},pageScroll:function(){if(!this.status){var a=this,e=document.getElementById("wrap"),n=document.getElementById("main"),c=document.body.clientHeight;e.style.height=c+"px";for(var t=document.getElementsByTagName("div"),i=0;i<t.length;i++)"page"==t[i].className&&(t[i].style.height=c+"px");-1!=navigator.userAgent.toLowerCase().indexOf("firefox")?document.addEventListener("DOMMouseScroll",s,!1):document.addEventListener?document.addEventListener("mousewheel",s,!1):document.attachEvent?document.attachEvent("onmousewheel",s):document.onmousewheel=s}function s(e){if(a.changeStyle(a.status),!a.showH5){a.startTime=(new Date).getTime();var t=e.detail||-e.wheelDelta;if(Math.abs(n.offsetTop)>$("#page1").offset().top){if($(".back-to-top").addClass("bottom_right_cur"),$(".bottom_right").hasClass("hide")){$(".codeFix").addClass("codeFixCur");setTimeout(function(){$(".codeFix").removeClass("codeFixCur")},3e3);$(".bottom_right").removeClass("hide")}}else $(".back-to-top").addClass("hide"),$(".back-to-top").removeClass("bottom_right_cur");var i=$(window).height(),s=$("#page4").offset().top,o=$(window).scrollTop();o<=s&&s<o+i&&(a.setStatus||(a.setStatus=!0,setTimeout(function(){a.initChart();var e=0,t=0,i=0,s=setInterval(function(){e++,95==(a.proccess1=e)&&clearInterval(s)},10),o=setInterval(function(){t++,90==(a.proccess2=t)&&clearInterval(o)},10),n=setInterval(function(){i++,75==(a.proccess3=i)&&clearInterval(n)},8)},400))),a.endTime-a.startTime<-1e3&&(0<t&&parseInt(n.offsetTop)>-3*c&&(a.now=a.now-c,r(a.now)),t<0&&parseInt(n.offsetTop)<0&&(a.now=a.now+c,r(a.now)),a.endTime=(new Date).getTime())}}function r(e){$("#main").animate({top:e+"px"},1e3)}},getProccess:function(e,t,i){var s=e,o=0,n=this;s=setInterval(function(){o++,1==t?n.proccess1=o:2==t?n.proccess2=o:n.proccess3=o,o==i&&clearInterval(s)},2)},initChart:function(){this.chart1=echarts.init(document.getElementById("chart1")),this.chart2=echarts.init(document.getElementById("chart2")),this.chart3=echarts.init(document.getElementById("chart3"));var e={graphic:[],series:[{name:"",type:"pie",center:["50%","50%"],radius:["78%","88%"],hoverAnimation:!1,color:["#8FC7F6","#DADADA"],label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:[{name:"",value:586},{name:"",value:42}]}]};this.chart1.setOption(e),this.chart2.setOption({graphic:[],series:[{name:"",type:"pie",center:["50%","50%"],radius:["78%","88%"],hoverAnimation:!1,color:["#8FC7F6","#DADADA"],label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:[{name:"",value:586},{name:"",value:68}]}]}),this.chart3.setOption({graphic:[],series:[{name:"",type:"pie",center:["50%","50%"],radius:["78%","88%"],hoverAnimation:!1,color:["#8FC7F6","#DADADA"],label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:[{name:"",value:586},{name:"",value:180}]}]})},changeStyle:function(e){e?($("#main").css("position","static"),$("#wrap").removeClass("pc-box"),$(".index-part").css("height","100%"),$(".features-part").css("height","auto"),$(".features-part").css("padding-bottom","30px"),$(".core-services-part").css("height","auto"),$(".core-services-part").css("padding-bottom","30px"),$(".mass-target-part").css("height","auto")):($("#main").css("position","relative"),$("#wrap").addClass("pc-box"),$(".index-part").css("height","100%"),$(".features-part").css("height","100%"),$(".core-services-part").css("height","100%"),$(".mass-target-part").css("height","100%"))},isScrollOnEle:function(){},scrollFunH5:function(){console.log("滚动----");var e=$("#chart1").offset().top,t=($("#chart2").offset().top,$(window).height()),i=$(window).scrollTop();i<=e&&e<i+t&&(95==this.proccess1||(this.getProccess("t1",1,95),this.chart1||this.initChart(),this.getProccess("t2",2,90),this.chart2||this.initChart(),this.getProccess("t3",3,75),this.chart3||this.initChart()))},refresh:function(){var e=this,t=this;this.screenWidth=document.body.clientWidth,this.screenHeight=document.body.clientHeight;this.chart1,this.chart2,this.chart3;if(768<this.screenWidth)this.screenHeight<window.screen.availHeight-98||t.showH5?(t.status=!0,-1!=navigator.userAgent.toLowerCase().indexOf("firefox")?document.addEventListener("DOMMouseScroll",t.scrollFunH5,!1):document.addEventListener?document.addEventListener("mousewheel",t.scrollFunH5,!1):document.attachEvent?document.attachEvent("onmousewheel",t.scrollFunH5):document.onmousewheel=t.scrollFunH5):(t.pageScroll(),t.status=!1);else{t.showH5=!0,t.status=!0;var i=t.$refs.viewBox,s=$(".target-list").offset().top;$(window).height(),$(window).scrollTop();i.addEventListener("scroll",function(e){if(t.$refs.viewBox.scrollTop>s-150){if(console.log("到底"),95==t.proccess1)return;console.log("打印---"),t.getProccess("t1",1,95),t.chart1||t.initChart(),t.getProccess("t2",2,90),t.chart2||t.initChart(),t.getProccess("t3",3,75),t.chart3||t.initChart()}},!1)}t.changeStyle(t.status),window.onresize=function(){return window.screenWidth=document.body.clientWidth,window.screenHeight=document.body.clientHeight,t.screenHeight=window.screenHeight,void(768<(t.screenWidth=window.screenWidth)?(t.showH5=!1,t.status=!1,e.chart1&&(e.chart1.resize(),e.chart2.resize(),e.chart3.resize()),t.screenHeight<window.screen.availHeight-98?(t.changeStyle(!0),t.status=!0):(t.changeStyle(!1),t.status=!1,t.startTime=0,t.endTime=0,t.now=0,$("#main").animate({top:"0px"},0),document.getElementById("msg_end").scrollIntoView(!1),t.pageScroll())):(t.showH5=!0,t.status=!0,t.changeStyle(!0),window.location.reload()))}}},mounted:function(){this.refresh()},created:function(){},updated:function(){},watch:{}});