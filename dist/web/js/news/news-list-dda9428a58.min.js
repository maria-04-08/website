var vm=new Vue({el:"#app",data:function(){return{pageNum:1,newList:"",pageList:[1,2,3,4,5,6,7,8,9,10],width:"",mobileList:[],type:"",loadingTxt:"上拉加载更多",loading:!1}},created:function(){this.getBanner(),this.width=window.innerWidth,document.getElementsByTagName("html")[0].style.fontSize=window.innerWidth/10+"px",765<this.width?this.type="pc":this.type="mobile";var t=this;$(window).resize(function(){document.getElementsByTagName("html")[0].style.fontSize=window.innerWidth/10+"px",t.width=window.innerWidth}),window.addEventListener("scroll",this.handleScroll)},methods:{getBanner:function(){var e=this,i=this;if(i.loading=!0,0<i.mobileList.length&&i.mobileList.length<10)i.loadingTxt="没有更多数据了";else{var t={pageNum:i.pageNum,pageSize:10,originId:67};i.$http(API.listByOriginId,t,function(t){if("pc"==i.type)i.newList=t.data;else{if(i.mobileList=i.mobileList.concat(t.data.list),!t.data.next)return i.loadingTxt="没有更多数据了",void(i.loading=!0);i.pageNum=i.pageNum+1,i.loadingTxt="上拉加载更多",i.loading=!1}},function(t){e.$toast(t.msg)})}},appyBtn:function(t,e){e?utils.openUrl(t,{id:e}):utils.openUrl(t)},onPage:function(t){var e=this;if(e.pageNum=t,e.getBanner(),t==e.pageList[e.pageList.length-1]&&e.newList.pages>e.pageList[e.pageList.length-1]){for(var i=[],n=Number(e.newList.pages)+1,s=e.pageList[e.pageList.length-2];s<n;s++)i.length<10&&i.push(s);e.pageList=i}if(t==e.pageList[0]&&1!=t){for(i=[],s=(t=t<10?9:t)-8;s<t+2;s++)i.length<10&&i.push(s);e.pageList=i}},onBefore:function(){for(var t=[],e=1;e<11;e++)t.length<10&&t.push(e);this.pageList=t,this.pageNum=t[0],this.getBanner()},onLast:function(){for(var t=[],e=Number(this.newList.pages)+1,i=Number(this.newList.pages)-9;i<e;i++)t.length<10&&t.push(i);this.pageList=t,this.pageNum=t[t.length-1],this.getBanner()},onBtn:function(t){$(".projectList li").eq(t).removeClass("btnNone"),$(".projectList li").eq(t).addClass("btnCur")},hideBtn:function(t){$(".projectList li").eq(t).removeClass("btnCur"),$(".projectList li").eq(t).addClass("btnNone")},handleScroll:function(){window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;var t=window.scrollY,e=window.innerHeight;if(document.body.scrollHeight<=t+e){if(this.loading)return;console.log(111111111),this.getBanner()}}},watch:{width:function(t){765<this.width&&"pc"!=this.type?(this.type="pc",this.pageNum=1,this.newList="",this.pageList=[1,2,3,4,5,6,7,8,9,10],this.getBanner()):this.width<765&&"mobile"!=this.type&&(this.type="mobile",this.mobileList=[],this.pageNum=1,this.getBanner())}}});