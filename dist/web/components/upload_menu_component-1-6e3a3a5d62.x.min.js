!function(){var n={template:'\n<div class="upload-menu-component">\n  \n  <div class="upload-menu-component-cover"\n    v-show="isShowHandler"\n    @click="hide"\n    v-stop-cover></div>\n\n  <transition name="upload-menu">\n    <div class="upload-menu"\n      v-if="isShowHandler">\n      \x3c!-- <div :class="{handler: true, show: isShowHandler}"\n      v-show="isShowHandler"> --\x3e\n      <div id="div-container">\n          <h2><p id="aa">aaaaaaa</p></h2>\n      </div>\n      \n      <div  id="camera-container">\n        <p id="camera">拍照</p>\n        <input type="file"\n          accept="image/*"\n          capture="camera"\n          >\n      </div>\n  \n      <i class="horizon-bar"></i>\n  \n      <div id="image-container" @click.stop="hide">\n        <p>从相册中选择</p>\n        <input type="file"\n          id="image"\n          accept="image/*"\n          @change="selectPic"\n          >\n      </div>\n      <h4 @touchend.prevent="cancel">取消</h4>\n    </div>\n  </transition>\n</div>\n',props:{token:String},data:function(){return{imgSrc:"",qiNiuToken:"",uploadObj:"",isShowHandler:!1,showFileInput:!0}},created:function(){},mounted:function(){},methods:{init:function(n,i){var t=this;this.getQiNiuToken(function(){return t.initQiNiu(n,i)})},initQiNiu:function(n,i){var u=this,t={disable_statistics_report:!1,runtimes:"html5,flash,html4",browse_button:n,container:document.getElementById(i),uptoken:this.qiNiuToken,get_new_uptoken:!1,domain:QINIU_IMG_ROOT,max_file_size:"100mb",dragdrop:!0,max_retries:5,chunk_size:"4mb",auto_start:!0,unique_names:!1,save_key:!1,multi_selection:!1,init:{FilesAdded:function(n,i){plupload.each(i,function(n){})},BeforeUpload:function(n,i){u.$emit("before-upload",i)},UploadProgress:function(n,i){u.$emit("input",n.total.percent)},FileUploaded:function(n,i,t){var e=n.getOption("domain"),o=JSON.parse(t.response),a=""+e+o.key;u.$emit("on-success",a,o)},Error:function(n,i,t){u.$emit("on-error",i.code+"-"+t)},UploadComplete:function(){},Key:function(n,i){return u.createUUId()+".jpg"}}};this.uploadObj=Qiniu.uploader(t)},createdQiNiuScript:function(n){},getQiNiuToken:function(i){var t=this,n={};this.token&&(n.token=this.token),this.$http(API.getQiNiuToken,{},function(n){t.qiNiuToken=n.data.token,i()},function(n){return t.$toast(n.msg)},n)},createUUId:function(){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()+Date.now()},selectPic:function(n){var i=this;this.showFileInput=!1;var t=n.target.files[0],e=t.type;if(-1==e.indexOf("png")&&-1==e.indexOf("jpg")&&-1==e.indexOf("jpeg"))return this.showFileInput=!0,void this.$toast("请上传正确的图片");this.$emit("before-upload",t),this.upload(t),this.$nextTick(function(){i.showFileInput=!0})},upload:function(n){this.qiNiuToken,this.createUUId()},uploadComplete:function(n){var i=qiniu.imageMogr2({"auto-orient":!0,strip:!0},n.key,"http://test.pic.alasga.cn/");this.imgSrc=i,this.$emit("on-success",i,n)},uploading:function(n){var i=n.total.percent;this.$emit("input",i)},uploadError:function(n){this.$emit("on-error",n)},show:function(){var n=this;this.isShowHandler=!0,this.$nextTick(function(){n.init()})},hide:function(){this.isShowHandler=!1},cancel:function(){this.isShowHandler=!1}}};Vue.component("upload-menu-component",n)}();